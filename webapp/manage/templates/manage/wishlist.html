{% extends "manage/base.html" %}

{% block extra_head %}
{{ block.super }}
<style type="text/css">
div.item, div.payment {
    margin-left: 40px;
}
div.payment {
    border-bottom: 1px solid #ccc;
}
</style>
{% endblock %}

{% block main %}
<h3>Wishlist</h3>
<dl class="dl-horizontal">
  <dt>Identifier</dt>
  <dd>{{ wishlist.identifier }}</dd>
  <dt>Verified</dt>
  <dd>{{ wishlist.verified }}</dd>
  <dt>Email</dt>
  <dd>{{ wishlist.email }}</dd>
  <dt>Name</dt>
  <dd>{{ wishlist.name }}</dd>
  <dt>Added</dt>
  <dd>{{ wishlist.added }}</dd>
  <dt>Modified</dt>
  <dd>{{ wishlist.modified }}</dd>
</dl>

{% for item, payments in items_preferred %}
<div class="item">
<h3><a href="{% url 'main:wishlist' item.identifier %}">{{ item.title }}</a></h3>
<dl class="dl-horizontal">
  <dt>Identifier</dt>
  <dd><a href="{% url 'main:wishlist' item.identifier %}">{{ item.identifier }}</a></dd>
  <dt>Title</dt>
  <dd><a href="{{ item.url }}">{{ item.title }}</a></dd>
  <dt>Affiliates URL</dt>
  <dd>
    {% if item.affiliates_url %}
    <a href="{{ item.affiliates_url }}" target="_blank">{{ item.affiliates_url }}</a><br>
    {% else %}
    No affiliates URL
    {% endif %}
  </dd>
  <dt>Price</dt>
  <dd class="price">${{ item.price|floatformat:2 }}</dd>
  <dt>Preference</dt>
  <dd>{{ item.preference }}</dd>
  <dt>Complete</dt>
  <dd>{% if item.complete %}Yes!{% else %}No{% endif %}</dd>
</dl>


  {% for payment in payments %}
    <div class="payment">
    {% if forloop.first %}
    <h3>Payments</h3>
    {% endif %}
    <dl class="dl-horizontal">
      <dt>Amount</dt>
      <dd class="price">${{ payment.amount|floatformat:2 }}</dd>
      <dt>Actual amount</dt>
      <dd class="price">${{ payment.actual_amount|floatformat:2 }}</dd>
      <dt>Email</dt>
      <dd>{{ payment.email }}</dd>
      <dt>Name</dt>
      <dd>{{ payment.name }}</dd>
      <dt>Message</dt>
      <dd>{{ payment.message }}</dd>
      <dt>Balanced URI</dt>
      <dd><a href="{{ payment.balanced_marketplace_url }}">{{ payment.balanced_uri }}</a></dd>
      <!--<dt>Balanced Hash</dt>
      <dd>{{ payment.balanced_hash }}</dd>-->
      <dt>Added</dt>
      <dd>{{ payment.added }}</dd>
      <dt>Modified</dt>
      <dd>{{ payment.modified }}</dd>
    </dl>
    </div>
  {% endfor %}
</div>
{% endfor %}

{% endblock %}


{% block javascript %}
{{ block.super }}
{% endblock %}
